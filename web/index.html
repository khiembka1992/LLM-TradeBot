<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM-TradeBot Dashboard</title>
    <link rel="stylesheet" href="/static/style.css?v=30">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="glass-panel header">
            <div class="logo">
                <span class="icon">ü§ñ</span>
                <h1>LLM-TradeBot: Adversarial Decision Framework <a href="https://github.com/EthanAlgoX/LLM-TradeBot"
                        target="_blank"
                        style="color: var(--neon-blue); text-decoration: none; font-size: 0.65em;">https://github.com/EthanAlgoX/LLM-TradeBot</a>
                </h1>
            </div>
            <div class="status-indicators">
                <div class="controls">
                    <button id="btn-start" class="btn-control start" title="Start Trading">‚ñ∂</button>
                    <button id="btn-pause" class="btn-control pause" title="Pause Trading">‚è∏</button>
                    <button id="btn-stop" class="btn-control stop" title="Stop System">‚èπ</button>
                    <button id="btn-restart" class="btn-control restart" title="Restart System">üîÑ</button>
                    <select id="interval-selector" class="interval-selector" title="Cycle Interval">
                        <option value="1">1 min</option>
                        <option value="3" selected>3 min</option>
                        <option value="5">5 min</option>
                    </select>
                </div>
                <div class="status-item">
                    <span class="label">MODE</span>
                    <span id="sys-mode" class="value badge">LOADING</span>
                </div>
                <div class="status-item">
                    <span class="label">CYCLE</span>
                    <span id="cycle-counter" class="value">#0</span>
                </div>
                <div class="status-item">
                    <span class="label">EQUITY</span>
                    <span id="header-equity" class="value">$0.00</span>
                </div>
            </div>
        </header>

        <!-- Main Grid -->
        <main class="dashboard-grid">

            <!-- Row 1: K-Line + Net Value -->
            <section class="row-charts">
                <!-- K-Line Chart -->
                <div class="glass-panel card kline-card">
                    <div class="chart-header">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <h2 style="margin: 0;">üìâ Real-time K-Line</h2>
                            <select id="symbol-selector"
                                style="padding: 5px 10px; margin-left: 20px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: #fff; font-size: 0.9rem; cursor: pointer;">
                                <option value="BTCUSDT" selected>BTC/USDT</option>
                                <option value="ETHUSDT">ETH/USDT</option>
                                <option value="BNBUSDT">BNB/USDT</option>
                                <option value="SOLUSDT">SOL/USDT</option>
                                <option value="ADAUSDT">ADA/USDT</option>
                            </select>
                        </div>
                    </div>
                    <div class="kline-container-wrapper">
                        <div class="tradingview-widget-container">
                            <div id="tradingview_b8265"></div>
                            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
                            <script type="text/javascript">
                                new TradingView.widget(
                                    {
                                        "width": "100%",
                                        "height": "100%",
                                        "symbol": "BINANCE:BTCUSDT",
                                        "interval": "1",
                                        "timezone": "Asia/Shanghai",
                                        "theme": "dark",
                                        "style": "1",
                                        "locale": "zh_CN",
                                        "toolbar_bg": "#f1f3f6",
                                        "enable_publishing": false,
                                        "hide_top_toolbar": true,
                                        "save_image": false,
                                        "container_id": "tradingview_b8265"
                                    }
                                );
                            </script>
                        </div>
                    </div>
                </div>

                <!-- Net Value -->
                <div class="glass-panel card chart-composite-card">
                    <div class="chart-header">
                        <h2>üìà Net Value Curve</h2>
                        <div class="header-metrics">
                            <div class="h-metric">
                                <span class="label">Total Equity</span>
                                <span id="acc-equity" class="val">$0.00</span>
                            </div>
                            <div class="h-metric">
                                <span class="label">Wallet</span>
                                <span id="acc-wallet" class="val">$0.00</span>
                            </div>
                            <div class="h-metric">
                                <span class="label">PnL</span>
                                <span id="acc-pnl" class="val neutral">$0.00</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container-lg">
                        <canvas id="equityChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Row 2: Decisions + Trade History -->
            <section class="row-tables">
                <!-- Decisions -->
                <div class="glass-panel card decision-table-card">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h2 style="margin: 0;">üìã Recent Decisions</h2>
                        <div id="position-info"
                            style="font-size: 0.85rem; color: #a0aec0; display: flex; gap: 20px; align-items: center;">
                            <span id="position-count" style="color: #e0e6ed;">üìä Positions: 0</span>
                            <div id="position-details" style="display: flex; gap: 15px;">
                                <!-- Dynamic position details will be inserted here -->
                            </div>
                            <span id="position-pnl" class="val neutral">Total PnL: $0.00</span>
                        </div>
                    </div>
                    <div class="table-container">
                        <table id="decision-table">
                            <thead>
                                <tr>
                                    <th title="ÂÜ≥Á≠ñÁîüÊàêÊó∂Èó¥">Time</th>
                                    <th title="Âæ™ÁéØÊ¨°Êï∞">Cycle</th>
                                    <th title="‰∫§ÊòìÂØπ">Symbol</th>
                                    <th title="ÊúÄÁªàÂÜ≥Á≠ñÂä®‰Ωú (LONG/SHORT/HOLD/WAIT)">Result</th>
                                    <th title="‰ø°ÂøÉÂ∫¶ (0-100%)">Conf</th>
                                    <th title="ÂÜ≥Á≠ñÂéüÂõ†ËØ¶ÁªÜËØ¥Êòé (ÊÇ¨ÂÅúÊü•ÁúãÂÆåÊï¥)">Reason</th>
                                    <th title="Strategist ÁªºÂêàËØÑÂàÜ (-100~+100)">Strat</th>
                                    <th title="1Â∞èÊó∂Ë∂ãÂäø‰ø°Âè∑ (TrendSubAgent)">1h-T</th>
                                    <th title="1Â∞èÊó∂ÈúáËç°‰ø°Âè∑ (OscillatorSubAgent)">1h-O</th>
                                    <th title="15ÂàÜÈíüÂë®Êúü‰ø°Âè∑ (Ë∂ãÂäøT + ÈúáËç°O)">15m</th>
                                    <th title="5ÂàÜÈíüÂë®Êúü‰ø°Âè∑ (Ë∂ãÂäøT + ÈúáËç°O)">5m</th>
                                    <th title="ÊÉÖÁª™‰ø°Âè∑ (ËµÑÈáëÊµÅÂêë + ËµÑÈáëË¥πÁéá)">Sent</th>
                                    <th title="È£éÈô©Á≠âÁ∫ß (SAFE/WARNING/DANGER)">Risk</th>
                                    <th title="Guardian ÂÆ°Ê†∏ÁªìÊûú (‚úÖÈÄöËøá / ‚õîÊã¶Êà™)">Guard</th>
                                    <th title="‰ª∑Ê†ºÁ≤æÁ°ÆÁôæÂàÜ‰Ωç (0-100%, ÂΩìÂâç‰ª∑Âú®ÂéÜÂè≤Âå∫Èó¥ÁöÑ‰ΩçÁΩÆ)">Pos%</th>
                                    <th title="Â§öÂë®ÊúüÂØπÈΩêÁä∂ÊÄÅ (‚úÖ‰∏ÄËá¥ / ‚ûñÂàÜÊ≠ß)">Aligned</th>
                                    <th title="Â∏ÇÂú∫Áä∂ÊÄÅ (TREND_UP/TREND_DOWN/CHOPPY)">Regime</th>
                                    <th title="‰ª∑Ê†º‰ΩçÁΩÆ (HIGH/MIDDLE/LOW)">Position</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- JS Populated -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Trade History -->
                <div class="glass-panel card trade-table-card">
                    <h2>üìú Trade History</h2>
                    <div class="table-container">
                        <table id="trade-table">
                            <thead>
                                <tr>
                                    <th title="‰∫§ÊòìËÆ∞ÂΩïÊó∂Èó¥">Time</th>
                                    <th title="‰∫§ÊòìÂä®‰Ωú (BUY/SELL/CLOSE)">Action</th>
                                    <th title="‰∫§ÊòìÂØπ">Symbol</th>
                                    <th title="‰∫§Êòì‰ª∑Ê†º">Price</th>
                                    <th title="‰∫§ÊòìÊï∞Èáè">Quantity</th>
                                    <th title="‰∫§ÊòìÊàêÊú¨ (‰ª∑Ê†º √ó Êï∞Èáè)">Cost</th>
                                    <th title="Âπ≥‰ªì‰ª∑Ê†º">Exit Price</th>
                                    <th title="Áõà‰∫èÈáëÈ¢ù">PnL</th>
                                    <th title="ÂÜ≥Á≠ñ‰ø°ÂøÉÂ∫¶ (0-100%)">Confidence</th>
                                    <th title="‰∫§ÊòìÁä∂ÊÄÅ (OPEN/CLOSED/PENDING)">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- JS Populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Row 3: Logs (Full Width) -->
            <section class="row-logs">
                <div class="glass-panel card compound-card">
                    <div class="compound-header">
                        <h2>üì° Live Log Output</h2>
                    </div>
                    <div class="compound-body">
                        <div id="logs-container" class="logs-scroll">
                            <!-- JS Populated -->
                        </div>
                    </div>
                </div>
            </section>

        </main>
        </main>
    </div>
    <script src="/static/app.js"></script>
</body>

</html>